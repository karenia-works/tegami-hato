<div class="container">
  <h1>#{{ channel.channelTitle }}</h1>
  <h4>关注人数:{{ channel.userNumber }}</h4>

  <div class="searchAndFollow">
    <div class="bar">
      <app-searchbar></app-searchbar>
    </div>
    <div class="btn_d">
      <button class="btn btn-follow" disabled>已关注</button>
      <button class="btn btn-follow btn-cog" [routerLink]="'setting'">
        <mat-icon svgIcon="cogs"></mat-icon>
      </button>
    </div>
  </div>
  <div class="card" (click)="clickNew()">
    <div *ngIf="!showNew; then notNew; else New"></div>
    <ng-template #notNew>
      <div class="new">
        <mat-icon svgIcon="plus" class="icon"></mat-icon>
        <span class="title">新邮件</span>
      </div>
    </ng-template>
    <ng-template #New>
      <div class="open_new">
        <div class="input">
          <input
            name="search_box"
            id="search_box"
            type="text"
            class=" textbox search-box title-box"
            placeholder="为消息添加标题"
          />
          <textarea
            name="search_box"
            id="search_box"
            type="text"
            class="search-box textbox content-box"
            placeholder="输入邮件内容"
          ></textarea>
          <div class="func_part">
            <div class="a_area">
              <a href="" class="a">支持使用Markdown语法</a>
              <div class="label">|</div>
              <a href="" class="a reala">帮助</a>
              <div class="label">|</div>
              <a href="" class="a reala">高级编辑器</a>
            </div>
            <div class="btn_area">
              <button class="add_doc">
                <mat-icon svgIcon="attachment" class="icon"></mat-icon>添加附件
              </button>
              <button class="send">
                <mat-icon svgIcon="send" class="icon"></mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </div>
  
  <div class="info">
    <div
      *ngFor="let notice of channelMessages; let i = index"
      class="card"
      (click)="clickToOpen(i)"
    >
      <div *ngIf="showThis != i; then notOpen; else Open"></div>
      <ng-template #notOpen>
        <div class="title">
          {{ notice.title }}
        </div>
      </ng-template>

      <ng-template #Open>
        <div class="inside">
          <div class="title">
            {{ notice.title }}
          </div>
          <div class="sub">
            <div class="from">
              {{ notice.senderNickname }} &lt; {{ notice.senderEmail }} &gt;
            </div>
            <div class="time">
              {{ ulidTime(notice.msgId) | date:"yyyy/MM/dd H:mm" }}
            </div>
          </div>
          <div class="content">
            {{ notice.bodyPlain }}
          </div>
        </div>
      </ng-template>
    </div>
  </div>
</div>
